# Deserialization Lab (CVE-2017-5941)

## Overview

This lab demonstrates **CVE-2017-5941** - a Deserialization vulnerability in node-serialize that allows Remote Code Execution (RCE).

## How It Works

Deserialization vulnerability occurs when untrusted data is deserialized without proper validation:

1. **User Input**: Attacker sends malicious serialized data with function execution
2. **No Validation**: Server deserializes input without checking for dangerous functions
3. **Code Execution**: `_$$ND_FUNC$$_` prefix allows function execution during deserialization
4. **RCE**: Attacker can execute arbitrary commands on the server

## Setup

```bash
cd "RCE - Deserialization"
npm install
npm start
```

Then open `index.html` in your browser.

## Example Payloads

```json
{"rce":"_$$ND_FUNC$$_function(){require('child_process').exec('whoami',function(error,stdout,stderr){console.log(stdout)});}()"}
```

## Vulnerability Details

- **CVE**: CVE-2017-5941
- **Affected**: node-serialize < 0.0.5
- **Type**: Deserialization / RCE
- **Impact**: Remote Code Execution

## How the Exploit Works

The `node-serialize` library uses `_$$ND_FUNC$$_` prefix to serialize functions. When deserializing, if a string starts with this prefix, it's evaluated as code, allowing arbitrary code execution.

## Mitigation

1. **Update node-serialize**: Upgrade to version 0.0.5 or later
2. **Use Safe Alternatives**: Use `JSON.parse()` instead of unserialize
3. **Input Validation**: Never deserialize untrusted data
4. **Whitelist**: Only deserialize data from trusted sources
5. **Sandbox**: Run deserialization in isolated environments

## License

Apache License 2.0

---

**Warning**: Educational purposes only. Use responsibly!
